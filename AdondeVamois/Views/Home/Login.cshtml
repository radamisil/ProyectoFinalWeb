@using AdondeVamos.Model
@model AdondeVamos.Model.Usuarios


@{
    Html.RenderPartial("_EstiloIndex");
}

<header>
    <section id="login">
        <div class="container-login100" style=" background: linear-gradient(180deg, #FFAB00, #C2185B), url('../img/intro-bg.jpg') center top no-repeat;">
            <div class="wrap-login100 p-l-60 p-r-60 p-t-62 p-b-33">
                <div class="login100-form validate-form flex-sb flex-w">
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12 text-center">
                                <h2 class="section-heading">Bienvenido nuevamente!</h2>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-12">
                                <form id="login-form" class="form" action="Loguear" method="post">
                                    @Html.AntiForgeryToken()
                                    @if (string.IsNullOrEmpty(ViewBag.Mensaje))
                                    {<div class="form-group">
                                            <br /><br />
                                            <div class="wrap-input100 validate-input" data-validate="Correo requerido">
                                                @Html.EditorFor(model => model.Email, new { htmlAttributes = new { @class = "input100", placeholder = "Correo", autocomplete = "off", type = "Email" } })
                                                @Html.ValidationMessageFor(model => model.Email, "", new { @class = "section-info" })
                                                <span class="focus-input100"></span>
                                            </div>
                                            <br />
                                            <div class="wrap-input100 validate-input" data-validate="Contraseña requerida">
                                                @Html.EditorFor(model => model.Password, new { htmlAttributes = new { @class = "input100", placeholder = "Contraseña", autocomplete = "off", type = "password" } })
                                                @Html.ValidationMessageFor(model => model.Password, "", new { @class = "section-info" })
                                                <span class="focus-input100"></span>
                                            </div>
                                            <br />
                                            <div class="container-login100-form-btn m-t-17">
                                                <button class="login100-form-btn" type="submit" name="submit">
                                                    Ingresar
                                                </button>
                                            </div>
                                            <div class="p-t-31 p-b-9">

                                                <br />
                                                <br />
                                                <div id="register-link" class="text-center">
                                                    @Html.ActionLink("Aun no tengo cuenta", "Registracion", "Home", new { area = "" }, new { @class = "btn btn-primary btn-md" })
                                                </div>
                                            </div>


                                        </div>
                                    }
                                   
                                    @if (!string.IsNullOrEmpty(ViewBag.Mensaje))
                                    {//si existe un error de registro
                                        <script type="text/javascript">
                                            $(window).on('load', function () {
                                                $('#modal').modal('show');
                                            });
                                        </script>
                                        <div class="modal hide fade" id="modal">

                                            @if (@ViewBag.Mensaje == "E-mail y/o contraseña incorrectos, por favor intentá nuevamente")
                                            {
                                                <div class="modal-dialog" role="document">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title">Atención!</h5>
                                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                <span aria-hidden="true">&times;</span>
                                                            </button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <p>@ViewBag.Mensaje</p>
                                                        </div>

                                                    </div>
                                                </div>
                                                <script>
                                                    setTimeout(function () {
                                                        window.location.href = "/Home/Login";
                                                    }, 4000);
                                                </script>
                                            }
                                            @if (@ViewBag.Mensaje != "E-mail y/o contraseña incorrectos, por favor intentá nuevamente")
                                            {
                                                <div class="modal-dialog" role="document">
                                                    <div class="modal-content">
                                                        <div class="modal-header">
                                                            <h5 class="modal-title">Atención!</h5>
                                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                <span aria-hidden="true">&times;</span>
                                                            </button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <p>Bienvenid@@!</p>
                                                            <p>Sera redireccionado en unos segundos..</p>
                                                        </div>

                                                    </div>
                                                </div>
                                                <script>
                                                    setTimeout(function () {
                                                        window.location.href = "/Mapa/Mapa";
                                                    }, 4000);
                                                </script>
                                            }

                                        </div>
                                    }
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


</header>
